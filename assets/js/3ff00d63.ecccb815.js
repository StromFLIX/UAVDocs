(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{159:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/navio2-typical-plane-setup-scheme-e12905271c8b7522c40b6e4c3a121c4f.png"},84:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return r})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return s})),a.d(t,"default",(function(){return d}));var n=a(3),i=a(7),o=(a(0),a(111)),r={id:"techhw",title:"Setup"},l={unversionedId:"techhw",id:"techhw",isDocsHomePage:!1,title:"Setup",description:"The core of the technical hardware is a Raspberry Pi with a Navio2 shield. I have used the installation instructions from the manufacturer (Emlid) to connect the Emf\xfcnger, the servos and the motor. The power supply is provided by Emlid. All in all the following components were installed:",source:"@site/docs/tech_hw.md",slug:"/techhw",permalink:"/UAVDocs/docs/techhw",editUrl:"https://github.com/ArzelaAscoIi/UAVDocs/blob/main/docs/tech_hw.md",version:"current",sidebar:"someSidebar",previous:{title:"Drive",permalink:"/UAVDocs/docs/drive"},next:{title:"Configuration",permalink:"/UAVDocs/docs/techconfig"}},s=[{value:"Hardware",id:"hardware",children:[{value:"Navio2 and Raspberry Pis",id:"navio2-and-raspberry-pis",children:[]},{value:"Wiring",id:"wiring",children:[]},{value:"FPV",id:"fpv",children:[]}]},{value:"Software",id:"software",children:[]}],c={toc:s};function d(e){var t=e.components,r=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},c,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"The core of the technical hardware is a Raspberry Pi with a Navio2 shield. I have used the installation instructions from the manufacturer (Emlid) to connect the Emf\xfcnger, the servos and the motor. The power supply is provided by Emlid. All in all the following components were installed:"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Control system:")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Navio2"),Object(o.b)("li",{parentName:"ol"},"Raspberry Pi"),Object(o.b)("li",{parentName:"ol"},"9g Servos (5x)"),Object(o.b)("li",{parentName:"ol"},"Motor: Tunrigy 1400KV"),Object(o.b)("li",{parentName:"ol"},"ESC: 45a"),Object(o.b)("li",{parentName:"ol"},"GPS antenna"),Object(o.b)("li",{parentName:"ol"},"Power module (Navio2)"),Object(o.b)("li",{parentName:"ol"},"Telemetry"),Object(o.b)("li",{parentName:"ol"},"2200mAh Turnigy Lipo"),Object(o.b)("li",{parentName:"ol"},"receiver Turnigy 9x "),Object(o.b)("li",{parentName:"ol"},"channel to SBUS adapter")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"FPV:")),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"FPV camera"),Object(o.b)("li",{parentName:"ol"},"25mw 5.8gHz transmitter")),Object(o.b)("h2",{id:"hardware"},"Hardware"),Object(o.b)("h3",{id:"navio2-and-raspberry-pis"},"Navio2 and Raspberry Pis"),Object(o.b)("p",null,"Emlid provides detailed instructions, for cabling and installationd it Navios. I downloaded the latest debian based image for the raspberry pi and wrote it to a SD card with the PI imager. Here are already preinstalled almost all needed packages and tools. Among others Ardupilot and ROS.\nAfter I modified the ",Object(o.b)("inlineCode",{parentName:"p"},"wpa_suplicant.conf")," as described in the manual, so that the rpi automatically connects to the wifi, I could connect directly via ssh. Emlid directly added an empty ",Object(o.b)("inlineCode",{parentName:"p"},"ssh")," file in the image for this, so this didn`t have to be done anymore."),Object(o.b)("p",null,"With "),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"sudo emlittool ardupilot\n")),Object(o.b)("p",null,"I could simply configure ardupilot for my setup and start sending telemetry data over UDP by adding my local IP as described in the instructions."),Object(o.b)("p",null,"Up to this point neither servos, motor or receiver were connected. "),Object(o.b)("h3",{id:"wiring"},"Wiring"),Object(o.b)("p",null,"Here I followed entirely the illustration provided by ",Object(o.b)("a",{parentName:"p",href:"https://docs.emlid.com/navio2/ardupilot/typical-setup-schemes"},"Emlid"),".\nThe arrangement of the servos can also be swapped, because later you have to set the outputs manually anyway. "),Object(o.b)("p",null,Object(o.b)("img",{alt:"navio2-typical-plane-setup-scheme",src:a(159).default})," "),Object(o.b)("h4",{id:"the-tragedy-with-the-telemetry"},"The tragedy with the telemetry"),Object(o.b)("p",null,"After I wowohl set up the rpi with the Navio and wired the rest of the hardware (correctly), I downloaded Mission Planner. The connection via UDP established itself directly, but was of course dependent on the wifi and therefore more of a temporary solution. After connecting the telemetry counterpart to my computer, I tried to establish a connection via radio.\nHowever, I kept getting the error message ",Object(o.b)("inlineCode",{parentName:"p"},"No Hearbeat packages recieved"),". The telemetry was wired correctly according to the instructions of Emlid and switched on in the configuration file. The red lights, which are supposed to signal the transmission of data, did not blink either, so I looked for the error in the Navio and not in the telemetry itself.\nPlugging the telemetry into a USB port of the rpi and selecting this port for data transfer solved the problem. "),Object(o.b)("p",null,"Before I solved the problem, I spent almost a whole day looking for the error. Why ? I suspect that the UART port of my Navio is defective. Since I couldn't just accept that, I of course spent ages looking for the error on my end and (unfortunately) dived deep into the semantics and syntax of serial protocols.  But on the way I made a big mistake: ",Object(o.b)("strong",{parentName:"p"},"I enabled the serial port from the RPI"),"."),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"Never enable the serial port of the PI when the Navio2 board is installed."))),Object(o.b)("p",null,"Because this leads to undefined behavior.j I think that the communication between rpi and navio2 is disturbed and the image of Emlid, already uses the serial pins. Sometimes the PI doesn't start anymore and also doesn't connect to the w-lan. But sometimes everything works as expected."),Object(o.b)("h3",{id:"fpv"},"FPV"),Object(o.b)("p",null,"Here I reused my old setup from the quadrocopter. The live video transmission is not really necessary, because 25mW will probably not be enough to guarantee a continuous connection to the aircraft when it flies over the waypoints. (Of course always in line of sight). Eventually I will upgrade to the FPV combo vo DJI with its huge range with HD transmission. But as long as I can not guarantee that the duck remains safely in the air I prefer not to risk losing the precious hardware. "),Object(o.b)("h2",{id:"software"},"Software"))}d.isMDXComponent=!0}}]);